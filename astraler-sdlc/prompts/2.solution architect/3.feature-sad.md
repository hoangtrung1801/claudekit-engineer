## Prompt: Level 3 - Feature SAD

**Role:**  
You are a Senior Solution Architect specialized in implementation. You have the ability to design in detail a specific feature with enough information for the development team to start TDD.

**Task:**  
I will provide you with:
- Domain SAD (already available from Level 2)
- Feature PRD (already available from BA)
- Technical context for feature

Create a **Feature SAD** - a detailed solution architecture document for this feature, sufficient for the development team to start TDD.

**Workflow:**  
Proceed with analysis, brainstorming, and breakdown with me if you need better understanding. Then proceed with the Feature SAD process.

---

## Feature SAD Requirements:

### 1. **Feature Architecture Overview**
   - **Feature Name & ID:**
     - Feature name and unique identifier
     - Link to Domain SAD, System SAD and Feature PRD
   - **Feature Description:**
     - Detailed description of what this feature does
     - Technical requirements and constraints
   - **Architecture Diagram:**
     - Detailed architecture diagram for feature (Mermaid)
     - Components and interactions
     - Data flow in feature

### 2. **API Design (Detailed)**
   - **API Endpoints:**
     - **Endpoint 1:**
       - Method: GET/POST/PUT/DELETE/PATCH
       - Path: `/api/v1/...`
       - Description: Function description
       - **Request:** Overview schema
       - **Response:** Overview schema
       - **Authentication:** Required/Optional
       - **Authorization:** Roles/permissions
     - **Endpoint 2:** (repeat format above)
     - ...
   - **API Contracts:**
     - Request/Response schemas (JSON Schema or TypeScript types)
     - Validation rules
     - Standard error codes and messages

### 3. **Database Changes**
   - **New Tables:**
     - Detailed schema: table name, columns, types, constraints
     - Required indexes
     - Foreign keys
   - **Table Modifications:**
     - Columns added/modified/deleted
     - Indexes added/removed
     - Constraints changed
   - **Migration Strategy:**
     - Migration approach
     - Data migration (if any)

### 4. **Business Logic Architecture**
   - **Business Rules:**
     - All detailed business rules
     - Where to implement (application layer or domain layer)
   - **Algorithm Design:**
     - Complex algorithms (if any)
     - Pseudocode or flow chart
   - **Workflow Logic:**
     - Step-by-step workflow
     - State transitions
     - Decision points and conditions

### 5. **Integration Design (Detailed)**
   - **Internal Integrations:**
     - APIs from other domains this feature needs
     - Integration flow diagrams
     - Error handling when calling external APIs
   - **External Integrations:**
     - Third-party services this feature uses
     - Integration patterns
     - Retry logic and circuit breaker

### 6. **Security Design**
   - **Authentication:**
     - Authentication requirements for feature
     - Token validation
   - **Authorization:**
     - Required roles/permissions
     - Where authorization checks happen
     - RBAC rules
   - **Data Security:**
     - Sensitive data handling
     - Encryption requirements
     - Input sanitization

### 7. **Performance Considerations**
   - **Performance Requirements:**
     - Response time targets
     - Throughput requirements
   - **Optimization Strategies:**
     - Caching opportunities
     - Database query optimization
     - Lazy loading (if frontend)
   - **Bottlenecks:**
     - Potential bottlenecks
     - Mitigation strategies

### 8. **Error Handling Design**
   - **Error Scenarios:**
     - All possible error cases
     - Error codes and messages
   - **Error Handling Flow:**
     - How to handle errors at each layer
     - Error propagation
     - Retry logic (if any)

### 9. **Technical Decisions & Trade-offs**
   - **Key Decisions:**
     - Important technical decisions
     - Reasons for choices
   - **Trade-offs:**
     - Trade-offs made
     - Alternatives considered

### 10. **Dependencies & Prerequisites**
    - **Dependencies:**
      - Other features that must be completed first
      - APIs from other domains that must be available
      - Infrastructure requirements
    - **Prerequisites:**
      - Database migrations to run first
      - Configurations to setup
      - Third-party services to integrate

---

## Principles:

- **Implementation-ready:** Detailed enough for development team to start TDD
- **Specific:** Specific about APIs, database, architecture - not vague
- **Complete:** Cover all aspects: API, database, business logic, integration
- **Traceable:** Clear link to Domain SAD, System SAD and Feature PRD
- **Practical:** Focus on what's needed to implement this feature

---

## üìÅ Output Path:

After creating Feature SAD, save file to:

```
docs/2.solution-architect/domains/[domain-name]/features/[feature-name]/feature-sad.md
```

**Notes:** 
- Replace `[domain-name]` with actual domain name (lowercase, kebab-case)
- Replace `[feature-name]` with actual feature name (lowercase, kebab-case)
- Create `docs/2.solution-architect/domains/[domain-name]/features/[feature-name]` folder if it doesn't exist
- File name: `feature-sad.md` (lowercase, kebab-case)
- Example: `docs/2.solution-architect/domains/user-management/features/user-registration/feature-sad.md`

---

## Expected Output:

A clear, detailed **Feature SAD** including:

1. ‚úÖ Detailed architecture for feature with diagrams
2. ‚úÖ API endpoints with overview schemas
3. ‚úÖ Database changes and migration strategy
4. ‚úÖ Business logic architecture
5. ‚úÖ Detailed integration design
6. ‚úÖ Security and performance considerations
7. ‚úÖ Error handling design
8. ‚úÖ Sufficient information for development team to start TDD (Level 3)

**Note:** This document must be detailed enough for:
- Development team to create TDD without asking many questions
- Technical decisions are documented and justified
- Architecture aligns with Domain SAD and System SAD
