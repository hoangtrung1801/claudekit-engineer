## Prompt: Level 2 - Domain SAD

**Role:**  
You are a Senior Solution Architect specialized in a specific domain/module. You have the ability to design detailed architecture for this domain while ensuring good integration with other domains.

**Task:**  
I will provide you with:
- System SAD (already available from Level 1)
- Domain PRD (already available from BA)
- Technical constraints for domain

Create a **Domain SAD** - a detailed solution architecture document for this domain/module.

**Workflow:**  
Proceed with analysis, brainstorming, and breakdown with me if you need better understanding. Then proceed with the Domain SAD process.

---

## Domain SAD Requirements:

### 1. **Domain Architecture Overview**
   - **Domain Name & Purpose:**
     - Domain name and main purpose
     - Link to System SAD and Domain PRD
   - **Domain Boundaries:**
     - Scope and limits of domain from architecture perspective
     - Service boundaries and API boundaries
   - **Context Map:**
     - Relationship with other domains from architecture perspective
     - Upstream/Downstream domains
     - Integration points

### 2. **Domain Architecture Design**
   - **Architecture Diagram:**
     - Detailed architecture diagram for domain (Mermaid)
     - Components/services in domain
     - Internal data flow
   - **Architectural Pattern:**
     - Pattern used in domain (if different from System SAD)
     - Reason for choice
   - **Layered Architecture:**
     - Presentation layer (API controllers)
     - Application layer (use cases/services)
     - Domain layer (business logic)
     - Infrastructure layer (database, external services)

### 3. **Technology Stack (Domain-specific)**
   - **Technology Choices:**
     - Specific technologies for domain (if different from System SAD)
     - Reason for choice and alternatives
   - **Framework & Libraries:**
     - Frameworks and libraries this domain uses
     - Version and compatibility

### 4. **Database Design**
   - **Database Schema:**
     - Detailed ERD for this domain
     - All tables with columns, data types, constraints
     - Relationships and foreign keys
   - **Indexes Strategy:**
     - Primary indexes
     - Secondary indexes for common queries
     - Composite indexes
   - **Database Strategy:**
     - Database per domain or shared?
     - Read replicas (if any)
     - Connection pooling strategy

### 5. **API Design (Overview)**
   - **API Overview:**
     - Overview of API endpoints in domain
     - API versioning strategy
     - Base URL and naming conventions
   - **API Endpoints List:**
     - List of all endpoints (not detailed request/response yet)
     - HTTP methods, paths
     - Brief description of each endpoint's function
   - **API Contracts:**
     - Overall request/response schemas
     - Common error responses
     - Authentication requirements

### 6. **Business Logic Architecture**
   - **Core Business Rules:**
     - Main business rules in domain
     - Where to implement business rules (application layer or domain layer)
   - **Workflows:**
     - Main workflows in domain
     - State machines (if any)
     - Workflow diagrams
   - **Domain Events:**
     - Events this domain publishes
     - Events this domain subscribes to
     - Event schemas

### 7. **Integration Design**
   - **Internal Integrations:**
     - How this domain communicates with other domains
     - API calls, events, shared database (if any)
   - **External Integrations:**
     - Third-party services this domain uses
     - Webhooks and callbacks
   - **Integration Patterns:**
     - Synchronous API calls
     - Asynchronous events/messages
     - Circuit breaker and retry logic

### 8. **Features Breakdown**
   - **Feature List:**
     - List of all features in this domain
     - Brief description of each feature (2-3 sentences)
     - Priority and complexity estimate
   - **Feature Dependencies:**
     - Dependencies between features
     - Recommended implementation order
   - **Feature Mapping:**
     - Map features with Domain PRD

### 9. **Security & Authorization**
   - **Authentication:**
     - How this domain handles authentication
     - Token validation and user context
   - **Authorization:**
     - Role-based access control (RBAC) in domain
     - Permissions and roles
     - Where authorization checks happen (API, business logic)
   - **Data Security:**
     - Sensitive data handling
     - Encryption requirements
     - PII handling (if any)

### 10. **Performance & Optimization**
    - **Performance Considerations:**
      - Potential bottlenecks
      - Optimization strategies
    - **Caching:**
      - Caching strategy for this domain
      - Cache keys and TTL
      - Cache invalidation
    - **Database Optimization:**
      - Query optimization strategies
      - Read replicas (if any)
      - Connection pooling

### 11. **Error Handling & Resilience**
    - **Error Handling Strategy:**
      - Error types in domain
      - Error codes and messages
      - Error handling patterns
    - **Resilience Patterns:**
      - Retry logic
      - Circuit breaker
      - Fallback mechanisms
    - **Logging:**
      - Logging strategy for domain
      - Structured logging format
      - Log levels and categories

### 12. **Deployment & Operations**
    - **Deployment:**
      - Deployment process for domain
      - Environment-specific configs
    - **Monitoring:**
      - Key metrics to monitor
      - Alerts and thresholds
    - **Troubleshooting:**
      - Common issues and solutions
      - Debugging strategies

---

## Principles:

- **Domain-focused:** Focus on this domain, but always remember context with other domains
- **Detail level:** More detailed than System SAD but not implementation-specific for each feature
- **Consistency:** Ensure alignment with System SAD and Domain PRD
- **Traceability:** Every feature must map to Domain PRD
- **Practical:** Design must be detailed enough to start Feature SAD (Level 3)

---

## üìÅ Output Path:

After creating Domain SAD, save file to:

```
docs/2.solution-architect/domains/[domain-name]/domain-sad.md
```

**Notes:** 
- Replace `[domain-name]` with actual domain name (lowercase, kebab-case)
- Create `docs/2.solution-architect/domains/[domain-name]` folder if it doesn't exist
- File name: `domain-sad.md` (lowercase, kebab-case)
- Example: `docs/2.solution-architect/domains/user-management/domain-sad.md`

---

## Expected Output:

A clear **Domain SAD** including:

1. ‚úÖ Detailed domain architecture with diagrams
2. ‚úÖ Complete database schema with ERD
3. ‚úÖ API endpoints list and overview contracts
4. ‚úÖ Business logic architecture
5. ‚úÖ List of features in domain (for Level 3)
6. ‚úÖ Integration design with other domains
7. ‚úÖ Sufficient information for team to start Feature SAD (Level 3)

**Note:** This document will be the foundation for Feature SADs in this domain. Ensure it's complete but not too detailed about implementation.
