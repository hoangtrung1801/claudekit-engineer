## Prompt: Create System Backend Implementation Plan

**Role:**  
You are a Senior Backend Developer creating a detailed implementation plan with trackable tasks.

**Task:**  
I will provide you with System Planning, System TDD, and System Initialization. Create a comprehensive implementation plan document with checklist tasks for System Backend.

**Output:**  
A markdown document saved to `docs/7.implementation/system/backend-implementation-plan.md`

---

## Instructions

### Step 1: Analyze Input Documents

Read and analyze:
1. **System Planning** (`docs/5.planning-setup/system-planning.md`) - Timeline, phases, priorities
2. **System TDD** (`docs/3.technical-design/system-tdd.md`) - Technical specifications
3. **System Initialization** (`docs/6.initialization/system-initialization.md`) - Setup instructions

### Step 2: Generate Implementation Plan

Create implementation plan with:

1. **Header Section:**
   - Title: "System Backend Implementation Plan"
   - Status indicator (ğŸ”´ Not Started)
   - Creation date
   - Progress counter

2. **Prerequisites Checklist:**
   - Database setup
   - Environment configuration
   - Dependencies installed
   - Required credentials

3. **Implementation Tasks** (organized by category):
   
   #### 3.1 Project Structure & Configuration
   - [ ] Task for folder structure setup
   - [ ] Task for environment config
   - [ ] Task for app configuration
   
   #### 3.2 Database Infrastructure
   - [ ] Task for database connection
   - [ ] Task for Prisma setup
   - [ ] Task for base models
   - [ ] Task for migrations
   
   #### 3.3 Common Utilities
   - [ ] Task for helper functions
   - [ ] Task for validation utilities
   - [ ] Task for response formatters
   
   #### 3.4 Error Handling & Logging
   - [ ] Task for global error handler
   - [ ] Task for exception filters
   - [ ] Task for logging setup
   
   #### 3.5 Security Middleware
   - [ ] Task for authentication middleware
   - [ ] Task for authorization utilities
   - [ ] Task for CORS setup
   
   #### 3.6 API Infrastructure
   - [ ] Task for API routing setup
   - [ ] Task for versioning
   - [ ] Task for interceptors
   
   #### 3.7 Testing Infrastructure
   - [ ] Task for test framework setup
   - [ ] Task for test utilities

4. **Verification Checklist:**
   - [ ] All tasks completed
   - [ ] Code compiles
   - [ ] Tests passing
   - [ ] Code reviewed

5. **Files to Create Section:**
   - List all files that will be created/modified
   - With file paths and brief descriptions

---

## Output Template

```markdown
# System Backend Implementation Plan

> **Status:** ğŸ”´ Not Started  
> **Created:** [Current Date]  
> **Last Updated:** [Current Date]  
> **Progress:** 0/X tasks completed

---

## 1. Overview

This plan covers the implementation of base backend infrastructure for [Project Name], including:
- Project structure and configuration
- Database infrastructure with Prisma
- Common utilities and helpers
- Error handling and logging
- Security middleware
- API infrastructure
- Testing setup

**Estimated Duration:** X days  
**Tech Stack:** NestJS, PostgreSQL, Prisma, etc.

---

## 2. Prerequisites

Before starting implementation, ensure:

- [ ] PostgreSQL database is running
- [ ] Redis is running (if required)
- [ ] Node.js v18+ installed
- [ ] Environment variables configured
- [ ] Git repository initialized

---

## 3. Implementation Tasks

### 3.1 Project Structure & Configuration

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-001 | Create backend folder structure | 1h | â¬œ |
| SB-002 | Setup environment configuration (.env) | 1h | â¬œ |
| SB-003 | Configure NestJS app module | 2h | â¬œ |
| SB-004 | Setup config module with validation | 2h | â¬œ |

**Checklist:**
- [ ] **SB-001**: Create backend folder structure following conventions
- [ ] **SB-002**: Setup environment configuration with all required variables
- [ ] **SB-003**: Configure main NestJS app module with imports
- [ ] **SB-004**: Setup config module with schema validation

### 3.2 Database Infrastructure

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-005 | Initialize Prisma with schema | 2h | â¬œ |
| SB-006 | Create PrismaService wrapper | 1h | â¬œ |
| SB-007 | Setup database module | 1h | â¬œ |
| SB-008 | Create base entity patterns | 2h | â¬œ |
| SB-009 | Setup migration workflow | 1h | â¬œ |

**Checklist:**
- [ ] **SB-005**: Initialize Prisma with database schema
- [ ] **SB-006**: Create PrismaService with connection handling
- [ ] **SB-007**: Setup DatabaseModule for global injection
- [ ] **SB-008**: Define base entity patterns (timestamps, soft delete)
- [ ] **SB-009**: Setup and test migration workflow

### 3.3 Common Utilities

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-010 | Create response DTOs | 1h | â¬œ |
| SB-011 | Create pagination utilities | 2h | â¬œ |
| SB-012 | Create validation pipes | 1h | â¬œ |
| SB-013 | Create common decorators | 2h | â¬œ |

**Checklist:**
- [ ] **SB-010**: Create standardized response DTOs
- [ ] **SB-011**: Create pagination utilities (PageDto, PageOptionsDto)
- [ ] **SB-012**: Create custom validation pipes
- [ ] **SB-013**: Create common decorators (ApiPaginated, etc.)

### 3.4 Error Handling & Logging

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-014 | Create global exception filter | 2h | â¬œ |
| SB-015 | Define custom exceptions | 1h | â¬œ |
| SB-016 | Setup logging service | 2h | â¬œ |
| SB-017 | Configure request logging | 1h | â¬œ |

**Checklist:**
- [ ] **SB-014**: Create HttpExceptionFilter for global error handling
- [ ] **SB-015**: Define domain-specific custom exceptions
- [ ] **SB-016**: Setup structured logging service
- [ ] **SB-017**: Configure request/response logging middleware

### 3.5 Security Infrastructure

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-018 | Setup CORS configuration | 1h | â¬œ |
| SB-019 | Setup helmet security | 1h | â¬œ |
| SB-020 | Create rate limiting | 2h | â¬œ |
| SB-021 | Setup validation globally | 1h | â¬œ |

**Checklist:**
- [ ] **SB-018**: Configure CORS with proper origins
- [ ] **SB-019**: Setup helmet for security headers
- [ ] **SB-020**: Implement rate limiting middleware
- [ ] **SB-021**: Setup global validation pipe

### 3.6 API Infrastructure

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-022 | Setup API versioning | 1h | â¬œ |
| SB-023 | Configure Swagger/OpenAPI | 2h | â¬œ |
| SB-024 | Create transform interceptor | 1h | â¬œ |
| SB-025 | Create health check endpoint | 1h | â¬œ |

**Checklist:**
- [ ] **SB-022**: Setup API versioning (v1, v2)
- [ ] **SB-023**: Configure Swagger documentation
- [ ] **SB-024**: Create response transform interceptor
- [ ] **SB-025**: Create health check endpoint for monitoring

### 3.7 Testing Infrastructure

| ID | Task | Est. | Status |
|----|------|------|--------|
| SB-026 | Setup Jest configuration | 1h | â¬œ |
| SB-027 | Create test utilities | 2h | â¬œ |
| SB-028 | Setup test database | 1h | â¬œ |
| SB-029 | Create E2E test setup | 2h | â¬œ |

**Checklist:**
- [ ] **SB-026**: Configure Jest for unit and e2e tests
- [ ] **SB-027**: Create test utilities and mocks
- [ ] **SB-028**: Setup test database configuration
- [ ] **SB-029**: Create E2E test setup with supertest

---

## 4. Files to Create/Modify

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                          # Application entry point
â”‚   â”œâ”€â”€ app.module.ts                    # Root module
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ app.config.ts
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â””â”€â”€ jwt.config.ts
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ database.module.ts
â”‚   â”‚   â””â”€â”€ prisma.service.ts
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ pagination.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ response.dto.ts
â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚   â”‚   â”‚   â””â”€â”€ api-paginated.decorator.ts
â”‚   â”‚   â”œâ”€â”€ filters/
â”‚   â”‚   â”‚   â””â”€â”€ http-exception.filter.ts
â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â”‚   â””â”€â”€ transform.interceptor.ts
â”‚   â”‚   â””â”€â”€ pipes/
â”‚   â”‚       â””â”€â”€ validation.pipe.ts
â”‚   â””â”€â”€ modules/
â”‚       â””â”€â”€ health/
â”‚           â”œâ”€â”€ health.controller.ts
â”‚           â””â”€â”€ health.module.ts
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ jest-e2e.json
â”‚   â””â”€â”€ app.e2e-spec.ts
â”œâ”€â”€ .env.example
â”œâ”€â”€ nest-cli.json
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---

## 5. Verification Checklist

After completing all tasks:

- [ ] All SB-XXX tasks marked as completed
- [ ] Application starts without errors (`npm run start:dev`)
- [ ] Health check endpoint returns 200
- [ ] Swagger documentation accessible at /api/docs
- [ ] Database connection successful
- [ ] All unit tests passing (`npm run test`)
- [ ] E2E tests passing (`npm run test:e2e`)
- [ ] No TypeScript/ESLint errors
- [ ] Code reviewed and approved

---

## 6. Notes & Issues

### Implementation Notes
- [Space for notes during implementation]

### Issues Encountered
- [Space for documenting issues]

### Decisions Made
- [Space for architectural decisions]

---

## 7. Progress Log

| Date | Tasks Completed | Notes |
|------|-----------------|-------|
| | | |

---

**Next Step:** After completing System Backend, proceed to Domain Backend Planning for the first priority domain (Auth).
```

---

## Principles

1. **Be Specific:** Each task should be actionable and clear
2. **Include Estimates:** Every task should have time estimate
3. **Use IDs:** Task IDs (SB-XXX) for easy reference
4. **Track Progress:** Status column and checkboxes for tracking
5. **List Files:** Explicitly list all files to be created
6. **Verification:** Include verification checklist

---

## ğŸ“ Output Path

Save the generated plan to:

```
docs/7.implementation/system/backend-implementation-plan.md
```

**Notes:**
- Create `docs/7.implementation/system/` folder if it doesn't exist
- The plan document is a living document - update during implementation
- Mark tasks as completed using `[x]` or âœ…

